new Vue({data:{array:[],listRepetead:[],mostRepeated:null,rows:4,columns:4,matriz:[],options:[],counter:0,respondio:false,cantQuestions:10,correctAnswers:0,finished:true,beforeOfStart:true,percent:0,showAlert:false,showAlertMax:false,runClock:null,startTimestamp:0},mounted:function(){},methods:{generateArray:function(rows,columns){const arr=[];const limite=rows*columns;for(var i=0;i<limite;i++){const r=Math.random()*10;arr.push(Math.floor(r))}console.log(arr.sort());this.repeatedNumbers(arr);if(!this.validateRepeatedNumbers(this.listRepetead))this.generateArray(rows,columns);this.array=this.unSort(arr)},repeatedNumbers:function(arrayNumbers){var arraySort=arrayNumbers.sort();var repeatedNumbers=new Map;var contador=1;for(var index=0;index<arraySort.length;index++){if(arraySort[index+1]==arraySort[index]){contador++}else{repeatedNumbers.set(arraySort[index],contador);contador=1}}this.listRepetead=repeatedNumbers},validateRepeatedNumbers:function(repeatedNumbers){console.log(repeatedNumbers);let most_repeted1=[...repeatedNumbers.entries()].reduce(((a,e)=>e[1]>a[1]?e:a));let most_repeted2=[...repeatedNumbers.entries()].reduceRight(((a,e)=>e[1]>a[1]?e:a));return most_repeted1[0]===most_repeted2[0]},mostRepetedNumber:function(repeatedNumbers){let most_repeted=[...repeatedNumbers.entries()].reduce(((a,e)=>e[1]>a[1]?e:a));this.mostRepeated=most_repeted},makeMatriz:function(array,rows,columns){var matriz=[];var fila=[];var index=0;for(let row=0;row<rows;row++){for(let col=0;col<columns;col++){fila.push(array[index]);index++}matriz.push(fila);fila=[]}this.matriz=matriz},unSort:function(my_array){var t=my_array.sort((function(a,b){return Math.random()-.5}));return[...t]},answerOptions:function(listRepetead,mostRepetead){let numbers=[];let answer=mostRepetead[0];let veces=mostRepetead[1];listRepetead.delete(mostRepetead[0]);for(let[key,value]of listRepetead){numbers.push(key)}let options=[];options.push(answer);for(var i=0;i<3;i++){var idx=Math.floor(Math.random()*numbers.length);options.push(numbers[idx]);numbers.splice(idx,1)}options=this.unSort(options);this.options=options},generate:function(rows,columns){this.generateArray(rows,columns);this.mostRepetedNumber(this.listRepetead);console.log(this.mostRepeated);this.makeMatriz(this.array,this.rows,this.columns);this.answerOptions(this.listRepetead,this.mostRepeated)},answer:function(elem){this.counter++;let boton1=document.getElementById(elem);let boton2=document.getElementById(this.mostRepeated[0]);if(elem==this.mostRepeated[0]){this.correctAnswers++;boton2.className="btn btn-success"}else{boton2.className="btn btn-success";boton1.className="btn btn-danger"}this.options.forEach((element=>{$("#"+element).prop("disabled",true)}));this.respondio=true;this.showAlert=false},btnNext:function(){this.options.forEach((element=>{$("#"+element).prop("disabled",false)}));if(this.counter==this.cantQuestions){clearInterval(this.runClock);var porcentaje=this.correctAnswers/this.cantQuestions*100;if(porcentaje==100)this.percent="width: "+porcentaje+"%; border-radius: 10px";else this.percent="width: "+porcentaje+"%; border-radius: 10px 0 0 10px";this.finished=false}else{if(this.respondio){this.options.forEach((element=>{document.getElementById(element).className="btn btn-default"}));this.generate(this.rows,this.columns);this.respondio=false}else{this.showAlert=true}}},btnAgain:function(){this.respondio=false;this.counter=0;this.correctAnswers=0;this.finished=true;this.generate(this.rows,this.columns);document.getElementById("timer").innerHTML="";clearInterval(this.runClock);this.initCounter()},btnStart:function(){this.rows=$("#numfilas").val();this.columns=$("#numcolumnas").val();if(this.rows>10||this.columns>10||this.rows<5||this.columns<5){this.showAlertMax=true}else{6;this.beforeOfStart=false;this.generate(this.rows,this.columns)}this.initCounter()},initCounter:function(){var startTimestamp=0;this.runClock=setInterval((function(){startTimestamp++;document.getElementById("timer").innerHTML="<b>"+moment.unix(startTimestamp).format("mm:ss")+"</b>"}),1e3)}},template:`\n        <div class="container">\n            <div v-if="beforeOfStart">\n            <h5 class="card-title">Ingresar el número de filas y columnas que tendrá la matriz</h5>\n                    <div class="row">\n                        <div class="col-md-2">\n                            <div class="form-group">\n                                <input type="number" class="form-control" value="5" min="5" max="10" placeholder="Filas" id="numfilas">\n                            </div>\n                            <div class="form-group">\n                                <input type="number" class="form-control" value="6" min="5" max="10" placeholder="Columnas" id="numcolumnas">\n                            </div>\n                        </div>\n                    </div>\n                    <div v-if="showAlertMax" >\n                        <div class="row alert alert-warning alert-dismissible show" role="alert">\n                            El tamaño mínimo debe ser 5x5 y el tamaño máximo debe ser 10x10\n                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-md-2">\n                            <button class="btn btn-next" v-on:click="btnStart">Comenzar</button>\n                        </div>\n                    </div>\n                    \n                </div>\n            <div v-else>\n            <div id="timer"></div>\n                <div v-if="finished" class="row questions">\n                    \n                    <div class="col-md-9">   \n                        <div v-if="showAlert" >\n                            <div class="row alert alert-warning alert-dismissible show" role="alert">\n                                Eligir una opción\n                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n                                    <span aria-hidden="true">&times;</span>\n                                </button>\n                            </div>\n                        </div>                 \n                        <div class="table-responsive">\n                            <table class="table matriz table-bordered" id="matriz" style="border: solid;">\n                                <tbody>\n                                    <tr v-for="elem in matriz">\n                                        <td v-for="n in elem" class="matriz">{{ n }} </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                            \n                        </div>\n                    </div> \n                    <div class="col-md-3">\n                        <div v-for="elem in options">\n                            <button type="button" :id="elem" v-on:click="answer(elem)" style="" class="btn btn-default">{{ elem }}</button>\n                        </div>\n                            <br>\n                            <button class="btn btn-next" v-on:click="btnNext">Siguiente</button>\n                    </div>\n                </div>\n                <div v-else class=" answers">\n                    <div class="">\n                        Su resultado\n                        <div class="progress">\n                            <div class="progress-bar bg-success" role="progressbar" :style="percent" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">\n                                <span class="float-right"> <b> {{correctAnswers}}</b>/{{cantQuestions}}</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}).$mount("#app");